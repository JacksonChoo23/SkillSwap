<div class="d-flex align-items-center justify-content-between mb-3">
  <h1 class="h4 mb-0">Manage Users</h1>
  <a class="btn btn-outline-secondary btn-sm" href="/admin">Back to Dashboard</a>
</div>

<div class="table-responsive">
  <table class="table table-sm align-middle">
    <thead>
      <tr>
        <th>Name</th>
        <th>Email</th>
        <th>Role</th>
        <th>Status</th>
        <th>Location</th>
        <th>Created</th>
        <th class="text-end">Actions</th>
      </tr>
    </thead>
    <tbody>
      <% users.forEach(u => { %>
        <tr>
          <td><%= u.name %></td>
          <td><%= u.email %></td>
          <td><span class="badge <%= u.role==='admin'?'bg-dark':'bg-secondary' %>"><%= u.role %></span></td>
          <td>
            <span class="badge <%= u.isPublic ? 'bg-success' : 'bg-warning text-dark' %>">
              <%= u.isPublic ? 'Active' : 'Suspended' %>
            </span>
          </td>
          <td><%= u.location || '' %></td>
          <td><%= new Date(u.createdAt).toLocaleString() %></td>
          <td class="text-end">
            <form method="POST" action="/admin/users/<%= u.id %>/toggle-suspend" class="d-inline">
              <input type="hidden" name="_csrf" value="<%= csrfToken %>">
              <button class="btn btn-sm <%= u.isPublic ? 'btn-warning' : 'btn-success' %>" <%= u.role==='admin'?'disabled':'' %>>
                <%= u.isPublic ? 'Suspend' : 'Unsuspend' %>
              </button>
            </form>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>
</div>
